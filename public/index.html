<script src='https://unpkg.com/enigmatic'></script>
<script type=module src=https://unpkg.com/e-schema@0.0.6/schemas/test-schema.mjs></script>
<script type=module src=https://unpkg.com/e-schema@0.0.6></script>

<script type=module>
  await ready()
  console.log(db)

  customElements.define('my-db', class M extends HTMLElement {
    connectedCallback() {
      const s = new eSchema(schema)
      let i = 0
      Object.keys(db.schema).filter(n=>!n.match(/^_/)).map(typename=>{
        const td = JSON.stringify(s.getSchemaFor(typename))
        this.innerHTML += `<button onclick="state.detail = ${td}">${typename}</button>`
      })
    }
  });

  customElements.define('my-dbdetail', class M extends HTMLElement {
    set(o) {
      this.innerHTML = o
    }
  });
</script>

<my-db></my-db>
<br>
<my-dbdetail data="detail"></my-dbdetail>